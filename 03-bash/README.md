# Bash

## Manuals
- [Advanced bash-scripting guide](http://www.tldp.org/LDP/abs/html/index.html)
- [Bash Reference Manual](https://www.gnu.org/software/bash/manual/)
- [ksh Reference Manual](http://www.bolthole.com/solaris/ksh.html)


## Завдання 1

### ЗБИРАЄМО ДАНІ ПРО ПЛАТФОРМУ

##### Створіть bash скрипт `task1.sh`, що збирає базову інформацію про обладнання, операційну систему та конфігурацію мережевих інтерфейсів.

1. Скрипт повинен мати назву `task1.sh`  
   і має бути завантажений у GitHub репозиторій GlobalLogic;

2. Скрипт повинен запускатися командою:
   ```bash
   ./task1.sh [-h|--help] [-n num] [file]
   ```
   де `num` - кількість файлів із результатами,  
      `file` - шлях та ім'я файла, у який треба записати результат;  
   наприклад: `task1.sh -n 9 ./test/info/info.txt`

3. Скрипт повинен обробляти вказані йому при запуску ключі та параметри;

4. Параметр для ключа `-n` повинен бути цілим числом більшим за 1;

5. Якщо при запуску вказано ключ `-h` або `--help`,  
   скрипт повинен вивести лише довідкову інформацію  
   та завершити свою роботу з успішним результатом;

6. Якщо хоча б один ключ або параметр вказано неправильно,  
   скрипт повинен вивести інформацію про помилку в стандартний потік помилок  
   і завершити свою роботу із невдалим результатом;

7. Якщо у користувач встановив українську мову локалізації,  
   скрипт повинен виводити інформацію про помилки українською мовою.

8. Зібрані дані скрипт повинен записувати у файл, який вказано при запуску,  
   або у файл `~/bash/task1.out`, якщо при запуску файл не вказано;

9. Якщо потрібні директорії ще не існують,  
   скрипт повинен її автоматично створити;

10. Якщо директорії створити не вдалося,  
   скрипт повинен вивести інформацію про помилку в стандартний потік помилок  
   і завершити свою роботу із невдалим результатом;

11. Якщо файл із вказаним іменем (або іменем `task1.out`) вже існує,  
   цей файл необхідно перейменувати у файл: `файл-yyyymmdd-nnnn`, де  
   `файл` - вказане при запуску ім'я файла (або `task1.out`),  
   `yyyymmdd` - рік, місяць, день перейменування файла,  
   `nnnn` - номер перейменованого протягом дня файла, починаючи з `0000`;

12. Якщо при запуску вказано ключ `-n`,  
   скрипт повинен залишити у піддиректорії лише вказану кількість нових перейменованих файлів із вказаним іменем,  
   а усі старі файли - видалити;

13. Приклад файла з даними про платформу:
```
Date: Sat, 07 Jul 2018 16:18:06 +0300
---- Hardware ----
CPU: "Intel(R) Celeron(R) CPU E1400 @ 2.00GHz"
RAM: 2048 MB
Motherboard: "ASUSTeK Computer INC", "P5KPL-AM/PS"
System Serial Number: MT7089K12013428
---- System ----
OS Distribution: "CentOS release 6.10 (Final)"
Kernel version: 2.6.32-754.el6.x86_64
Installation date: Wed Sep 9 14:35:22 2015
Hostname: ws267.se.nure.ua
Uptime: 1:49
Processes running: 194
User logged in: 3
---- Network ----
lo: 127.0.0.1/8
eth0: 192.168.123.231/24
----"EOF"----
```

14. Значення та розділи (Hardware, System, Network) у файлі  
   повинні йти лише у вказаному порядку  
   і у вказаному (включно з лапками) вигляді;

15. Значення `Motherboard` та `System Serial Number`  
   потрібно формувати із отриманих з допомогою утиліти `dmidecode` параметрів:
   - baseboard-manufacturer,
   - baseboard-product-name,
   - system-serial-number;

16. Якщо якесь значення отримати не вдалося,  
   замість нього потрібно вказувати `Unknown`;

17. Інформацію про параметри налаштування мережевих інтерфейсів  
   потрібно збирати незалежно від їх стану та кількості;

18. Для кожного інтерфейсу повинна виводитися інформація про його IP адресу та мережеву маску;

19. Якщо IP адресу та маску для інтерфейсу не встановлено,  
   замість них має виводитися `-/-`


## Завдання 2

### ВСТАНОВЛЮЄМО ПРОГРАМУ

##### Створіть bash скрипт `task2.sh`, що встановлює створену в завданні 1 програму в систему.

1. Скрипт повинен мати назву `task2.sh`
   і має бути завантажений у GitHub репозиторій GlobalLogic;

2. Скрипт повинен запускати користувач root командою: `./task2.sh`

3. Якщо при запуску вказано ключ `-h` або `--help`,  
   скрипт повинен вивести лише довідкову інформацію  
   та завершити свою роботу з успішним результатом;

4. Якщо ключі або параметри вказано неправильно,  
   скрипт повинен вивести інформацію про помилку в стандартний потік помилок  
   і завершити свою роботу із невдалим результатом;

5. Якщо у користувач встановив українську мову локалізації,  
   скрипт повинен виводити інформацію про помилки українською мовою;

6. Скрипт повинен встановити створену в завданні 1 програму в директорію `/usr/local/bin`;

7. Якщо директорія ще не існує, скрипт повинен її автоматично створити;

8. Якщо директорію створити не вдалося,  
   скрипт повинен вивести інформацію про помилку в стандартний потік помилок  
   і завершити свою роботу із невдалим результатом;

9. Скрипт повинен автоматично внести зміни у конфігураційні файли системи  
   таким чином, щоб після інсталяції програми,  
   будь-який користувач міг її запустити командою: `task1.sh`

10. Перед внесенням змін, скрипт повинен створити резервні копії конфігураційних файлів  
   з іменами у вигляді: `файл-yyyymmdd-nnnn`, де  
   `файл` - ім'я конфігураційного файла,  
   `yyyymmdd` - рік, місяць, день створення резервної копії,  
   `nnnn` - номер створеної протягом дня резервної копії, починаючи з `0000`;

11. Резервні копії конфігураційних файлів мають знаходитися у тій самій директорії,  
   що і самі файли;

12. Після встановлення програми, ніхто з користувачів системи (крім root)  
   не повинен мати можливості вносити в неї зміни;

13. Якщо програму встановлено успішно,  
   скрипт повинен завершити роботу з успішним результатом.
